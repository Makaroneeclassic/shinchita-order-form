<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå Shinchita</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#f7f7f8;--card:#fff;--text:#111;--muted:#6b7280;--line:#e5e7eb;--primary:#3b82f6;}
    *{box-sizing:border-box}
    body{font-family:'Kanit',system-ui,Segoe UI,Arial;background:var(--bg);color:var(--text);margin:0}
    .wrap{max-width:920px;margin:24px auto;padding:0 16px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;box-shadow:0 2px 10px rgba(0,0,0,.03);padding:18px 16px;margin:14px 0}
    h1{font-size:22px;margin:14px 0 8px}
    h2{font-size:18px;margin:0 0 8px}
    h3{font-size:16px;margin:10px 0 6px}
    label{display:block;font-size:14px;margin:6px 0 4px}
    input,select,textarea{width:100%;padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff}
    textarea{resize:vertical}
    .row{display:grid;gap:12px}
    .row-2{grid-template-columns:1fr 1fr}
    .row-3{grid-template-columns:1fr 1fr 1fr}
    .muted{color:var(--muted);font-size:12px}
    .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
    .btn{cursor:pointer;border:0;border-radius:12px;padding:12px 16px;font-weight:600}
    .primary{background:#111;color:#fff}
    .secondary{background:var(--primary);color:#fff}
    .ghost{background:#fff;border:1px solid var(--line)}
    .bar{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    .pill{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:2px 8px;margin-right:6px;font-size:12px;color:#374151}
    .ok{color:#16a34a}
    .err{color:#b91c1c}
    .total{font-weight:600}
    .badge{background:#111;color:#fff;border-radius:999px;padding:2px 8px;margin-left:8px;font-size:12px}
    .autofill-card{background:#eff6ff;border:2px dashed var(--primary)}
    @media (max-width:720px){.row-2,.row-3{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="wrap">
  <h1>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå <span class="badge">Production</span></h1>
  <div class="card">
    <div class="muted">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå" ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Google Sheet ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á</div>
  </div>

  <!-- Auto-fill Card -->
  <div class="card autofill-card">
    <h2>‚ú® ‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h2>
    <label>‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö)</label>
    <textarea id="autofillInput" rows="10" placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
‡∏õ‡∏ô‡∏±‡∏î‡∏î‡∏≤  ~  ‡πÇ‡∏≠‡πã
511/730  ‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏à‡∏£‡∏±‡∏•‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ 3
‡πÅ‡∏Ç‡∏ß‡∏á‡∏ö‡∏≤‡∏á‡∏Ç‡∏∏‡∏ô‡∏®‡∏£‡∏µ  ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏Å‡∏≠‡∏Å‡∏ô‡πâ‡∏≠‡∏¢  ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û  10700
‡πÇ‡∏ó‡∏£  0944951790

‡∏ä‡∏∏‡∏ö‡πÅ‡∏õ‡πâ‡∏á‡∏ó‡∏≠‡∏î
‡∏Ñ‡∏•‡∏∞‡∏£‡∏™ 20

‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå
‡∏™‡πà‡∏á 13/10/68 ‡πÇ‡∏≠‡∏ô 640 B
Fb:‡∏õ‡∏ô‡∏±‡∏î‡∏î‡∏≤ ‡∏ö‡∏∏‡∏ç‡∏™‡πà‡∏á‡∏Å‡∏∏‡∏®‡∏•‡∏à‡∏¥‡∏ï"></textarea>
    <div class="bar">
      <button type="button" class="btn secondary" id="btnAutofill">‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
      <button type="button" class="btn ghost" id="btnClearAutofill">‡∏•‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á</button>
    </div>
    <div id="autofillMsg" style="margin-top:10px"></div>
  </div>

  <form id="f" class="card">
    <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
    <div class="row row-2">
      <div><label>‡∏ä‡∏∑‡πà‡∏≠</label><input name="first_name" id="first_name" required></div>
      <div><label>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label><input name="last_name" id="last_name" required></div>
    </div>
    <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
    <textarea name="address" id="address" rows="2" required></textarea>
    <div class="row row-2">
      <div>
        <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
        <input name="phone" id="phone" placeholder="0891234567" required>
        <div class="muted">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Primary ID (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)</div>
      </div>
      <div>
        <label>‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
        <input name="amount" id="amount" type="number" step="0.01" min="0" required>
      </div>
    </div>
    <div class="row row-2">
      <div>
        <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞</label>
        <select name="payment_method" id="payment_method">
          <option value="TRANSFER">‡πÇ‡∏≠‡∏ô</option>
          <option value="COD">COD</option>
        </select>
      </div>
      <div>
        <label>‡∏Ç‡∏ô‡∏™‡πà‡∏á</label>
        <input name="shipping" id="shipping" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå, Kerry, Flash">
      </div>
    </div>
    <div class="row row-2">
      <div>
        <label>Social Media</label>
        <div style="display:flex;gap:8px;margin-bottom:4px">
          <label style="display:inline-flex;align-items:center;cursor:pointer">
            <input type="radio" name="social_type" value="LINE" id="social_line" checked style="width:auto;margin-right:4px">
            <span>LINE</span>
          </label>
          <label style="display:inline-flex;align-items:center;cursor:pointer">
            <input type="radio" name="social_type" value="FB" id="social_fb" style="width:auto;margin-right:4px">
            <span>Facebook</span>
          </label>
        </div>
        <input name="social_name" id="social_name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Social Media">
      </div>
      <div>
        <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
        <input name="note" id="note" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô/‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á">
      </div>
    </div>

    <hr style="border:0;border-top:1px solid var(--line);margin:14px 0">

    <h2>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥ (‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πà‡∏≠)</h2>

    <!-- ROLL -->
    <h3>‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢‡∏°‡πâ‡∏ß‡∏ô (roll)</h3>
    <div class="grid3">
      <div>
        <label>‡∏Ñ‡∏•‡∏∞‡∏£‡∏™</label>
        <input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏Ñ‡∏•‡∏∞‡∏£‡∏™" id="roll-‡∏Ñ‡∏•‡∏∞‡∏£‡∏™">
      </div>
    </div>
    <div class="grid3">
      <div><label>‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°" id="roll-‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°"></div>
      <div><label>‡πÄ‡∏ú‡πá‡∏î</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡πÄ‡∏ú‡πá‡∏î" id="roll-‡πÄ‡∏ú‡πá‡∏î"></div>
      <div><label>‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß" id="roll-‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å" id="roll-‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å"></div>
      <div><label>‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤" id="roll-‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤"></div>
      <div><label>‡∏ï‡πâ‡∏°‡∏¢‡∏≥</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏ï‡πâ‡∏°‡∏¢‡∏≥" id="roll-‡∏ï‡πâ‡∏°‡∏¢‡∏≥"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥" id="roll-‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥"></div>
      <div><label>‡∏ä‡∏µ‡∏™</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏ä‡∏µ‡∏™" id="roll-‡∏ä‡∏µ‡∏™"></div>
      <div><label>‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™" id="roll-‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à" id="roll-‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à"></div>
      <div><label>‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à</label><input type="number" min="0" value="0" data-ptype="roll" data-flavor="‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à" id="roll-‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à"></div>
    </div>

    <!-- FRIED -->
    <h3>‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏≠‡∏ö (fried)</h3>
    <div class="grid3">
      <div>
        <label>‡∏Ñ‡∏•‡∏∞‡∏£‡∏™</label>
        <input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏Ñ‡∏•‡∏∞‡∏£‡∏™" id="fried-‡∏Ñ‡∏•‡∏∞‡∏£‡∏™">
      </div>
    </div>
    <div class="grid3">
      <div><label>‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°" id="fried-‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°"></div>
      <div><label>‡πÄ‡∏ú‡πá‡∏î</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡πÄ‡∏ú‡πá‡∏î" id="fried-‡πÄ‡∏ú‡πá‡∏î"></div>
      <div><label>‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß" id="fried-‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤" id="fried-‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤"></div>
      <div><label>‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤" id="fried-‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤"></div>
      <div><label>‡∏ï‡πâ‡∏°‡∏¢‡∏≥</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏ï‡πâ‡∏°‡∏¢‡∏≥" id="fried-‡∏ï‡πâ‡∏°‡∏¢‡∏≥"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥" id="fried-‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥"></div>
      <div><label>‡∏ä‡∏µ‡∏™</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏ä‡∏µ‡∏™" id="fried-‡∏ä‡∏µ‡∏™"></div>
      <div><label>‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™</label><input type="number" min="0" value="0" data-ptype="fried" data-flavor="‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™" id="fried-‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™"></div>
    </div>

    <!-- BATTERED -->
    <h3>‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢‡∏ä‡∏∏‡∏õ‡πÅ‡∏õ‡πâ‡∏á‡∏ó‡∏≠‡∏î (battered)</h3>
    <div class="grid3">
      <div>
        <label>‡∏Ñ‡∏•‡∏∞‡∏£‡∏™</label>
        <input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏Ñ‡∏•‡∏∞‡∏£‡∏™" id="battered-‡∏Ñ‡∏•‡∏∞‡∏£‡∏™">
      </div>
    </div>
    <div class="grid3">
      <div><label>‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°" id="battered-‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°"></div>
      <div><label>‡πÄ‡∏ú‡πá‡∏î</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡πÄ‡∏ú‡πá‡∏î" id="battered-‡πÄ‡∏ú‡πá‡∏î"></div>
      <div><label>‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß" id="battered-‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤" id="battered-‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤"></div>
      <div><label>‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤" id="battered-‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤"></div>
      <div><label>‡∏ï‡πâ‡∏°‡∏¢‡∏≥</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏ï‡πâ‡∏°‡∏¢‡∏≥" id="battered-‡∏ï‡πâ‡∏°‡∏¢‡∏≥"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥" id="battered-‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥"></div>
      <div><label>‡∏ä‡∏µ‡∏™</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏ä‡∏µ‡∏™" id="battered-‡∏ä‡∏µ‡∏™"></div>
      <div><label>‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™" id="battered-‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™"></div>
    </div>
    <div class="grid3">
      <div><label>‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏à</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏à" id="battered-‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏à"></div>
      <div><label>‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à" id="battered-‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à"></div>
      <div><label>‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à</label><input type="number" min="0" value="0" data-ptype="battered" data-flavor="‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à" id="battered-‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à"></div>
    </div>

    <div class="card" style="background:#fafafa;border-style:dashed">
      <div id="summary" class="muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏´‡πà‡∏≠</div>
    </div>

    <div class="bar">
      <button type="button" class="btn ghost" id="btnClear">‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°</button>
      <button type="submit" class="btn primary" id="btnSubmit">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
    </div>

    <div id="msg" style="margin-top:10px"></div>
  </form>

  <div class="card">
    <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
    <ol>
      <li>‡πÄ‡∏õ‡∏¥‡∏î n8n ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î Workflow ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô <b>Active</b></li>
      <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å <b>Production URL</b> ‡∏Ç‡∏≠‡∏á Webhook (<code>/webhook/order-intake</code>)</li>
      <li>‡∏ô‡∏≥‡πÑ‡∏õ‡πÅ‡∏ó‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ <code>WEBHOOK_URL</code> ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå</li>
      <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡∏Å‡∏£‡∏≠‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå"</li>
    </ol>
    <h3>‚ú® ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h3>
    <ol>
      <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (LINE, Email, etc.)</li>
      <li>‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á "‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"</li>
      <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥" ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</li>
    </ol>
  </div>
</div>

<script>
/** üîß ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ URL ‡∏Ç‡∏≠‡∏á Webhook (Production) ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ */
const WEBHOOK_URL = "https://n8n.makaronee.com/webhook/order-intake";  // ‚Üê ‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á

const form = document.getElementById('f');
const msg  = document.getElementById('msg');
const btnSubmit = document.getElementById('btnSubmit');
const summary = document.getElementById('summary');
const btnClear = document.getElementById('btnClear');
const autofillInput = document.getElementById('autofillInput');
const btnAutofill = document.getElementById('btnAutofill');
const btnClearAutofill = document.getElementById('btnClearAutofill');
const autofillMsg = document.getElementById('autofillMsg');

/** ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πà‡∏≠‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå */
function updateSummary(){
  const inputs = Array.from(document.querySelectorAll('input[data-ptype]'));
  const items = inputs
    .map(el => ({ product_type: el.dataset.ptype, flavor: el.dataset.flavor, packs: Number(el.value || 0) }))
    .filter(x => x.packs > 0);
  if(!items.length){ summary.innerHTML = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏´‡πà‡∏≠'; return; }
  const total = items.reduce((s,x)=>s+x.packs,0);
  const lines = items.map(x=>`${x.product_type} ‚Äì ${x.flavor}: ${x.packs} ‡∏´‡πà‡∏≠`);
  summary.innerHTML = `<span class="total">‡∏£‡∏ß‡∏° ${total} ‡∏´‡πà‡∏≠</span><br>${lines.join('<br>')}`;
}
document.querySelectorAll('input[data-ptype]').forEach(el => el.addEventListener('input', updateSummary));
updateSummary();

btnClear.addEventListener('click', ()=>{
  form.reset();
  updateSummary();
  msg.innerHTML = '';
});

btnClearAutofill.addEventListener('click', ()=>{
  autofillInput.value = '';
  autofillMsg.innerHTML = '';
});

/** Auto-fill Logic */
btnAutofill.addEventListener('click', ()=>{
  const text = autofillInput.value.trim();
  if(!text){
    autofillMsg.innerHTML = '<div class="err">‡πÇ‡∏õ‡∏£‡∏î‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>';
    return;
  }

  autofillMsg.innerHTML = '<div class="muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...</div>';

  try {
    const data = parseAutofillData(text);
    fillFormWithData(data);
    autofillMsg.innerHTML = `<div class="ok">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏û‡∏ö ${Object.keys(data).length} ‡∏ü‡∏¥‡∏•‡∏î‡πå</div>`;
    updateSummary();
  } catch(err) {
    autofillMsg.innerHTML = `<div class="err">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${err.message}</div>`;
  }
});

/** Parse text to extract data */
function parseAutofillData(text) {
  const data = { flavors: {} };
  const lines = text.split('\n').map(l => l.trim()).filter(l => l);

  let addressLines = [];
  let nameFound = false;

  // Product type keywords
  const productTypes = {
    '‡∏ä‡∏∏‡∏ö‡πÅ‡∏õ‡πâ‡∏á‡∏ó‡∏≠‡∏î': 'battered',
    '‡∏ä‡∏∏‡∏õ‡πÅ‡∏õ‡πâ‡∏á‡∏ó‡∏≠‡∏î': 'battered',
    'battered': 'battered',
    '‡∏°‡πâ‡∏ß‡∏ô': 'roll',
    'roll': 'roll',
    '‡∏ó‡∏≠‡∏î': 'fried',
    'fried': 'fried',
  };

  // Flavor keywords (‡πÄ‡∏û‡∏¥‡πà‡∏° "‡∏Ñ‡∏•‡∏∞‡∏£‡∏™")
  const flavorKeywords = {
    '‡∏Ñ‡∏•‡∏∞‡∏£‡∏™': { flavors: { roll: '‡∏Ñ‡∏•‡∏∞‡∏£‡∏™', fried: '‡∏Ñ‡∏•‡∏∞‡∏£‡∏™', battered: '‡∏Ñ‡∏•‡∏∞‡∏£‡∏™' } },

    '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°': { flavors: { roll: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°', fried: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°', battered: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°' } },
    'original': { flavors: { roll: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°', fried: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°', battered: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°' } },
    '‡πÄ‡∏ú‡πá‡∏î': { flavors: { roll: '‡πÄ‡∏ú‡πá‡∏î', fried: '‡πÄ‡∏ú‡πá‡∏î', battered: '‡πÄ‡∏ú‡πá‡∏î' } },
    'spicy': { flavors: { roll: '‡πÄ‡∏ú‡πá‡∏î', fried: '‡πÄ‡∏ú‡πá‡∏î', battered: '‡πÄ‡∏ú‡πá‡∏î' } },
    '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß': { flavors: { roll: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', fried: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', battered: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß' } },
    'bbq': { flavors: { roll: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', fried: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', battered: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß' } },
    'barbecue': { flavors: { roll: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', fried: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', battered: '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß' } },
    '‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å': { flavors: { roll: '‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å' } },
    'squid': { flavors: { roll: '‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å' } },
    '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤': { flavors: { roll: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤', fried: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤', battered: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤' } },
    'mala': { flavors: { roll: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤', fried: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤', battered: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤' } },
    '‡∏ï‡πâ‡∏°‡∏¢‡∏≥': { flavors: { roll: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥', fried: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥', battered: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥' } },
    'tomyum': { flavors: { roll: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥', fried: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥', battered: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥' } },
    '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥': { flavors: { roll: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥', fried: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥', battered: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥' } },
    'wasabi': { flavors: { roll: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥', fried: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥', battered: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥' } },
    '‡∏ä‡∏µ‡∏™': { flavors: { roll: '‡∏ä‡∏µ‡∏™', fried: '‡∏ä‡∏µ‡∏™', battered: '‡∏ä‡∏µ‡∏™' } },
    'cheese': { flavors: { roll: '‡∏ä‡∏µ‡∏™', fried: '‡∏ä‡∏µ‡∏™', battered: '‡∏ä‡∏µ‡∏™' } },
    '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™': { flavors: { roll: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', fried: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', battered: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™' } },
    'corn cheese': { flavors: { roll: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', fried: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', battered: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™' } },
    'corncheese': { flavors: { roll: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', fried: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', battered: '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™' } },
    '‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤': { flavors: { fried: '‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤', battered: '‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤' } },
    'paprika': { flavors: { fried: '‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤', battered: '‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤' } },
    // Vegetarian variants
    '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏à': { flavors: { battered: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏à' } },
    '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à': { flavors: { roll: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à', battered: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à' } },
    '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à': { flavors: { roll: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à', battered: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à' } },
    'mala veg': { flavors: { roll: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à', battered: '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ ‡πÄ‡∏à' } },
    'wasabi veg': { flavors: { roll: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à', battered: '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥ ‡πÄ‡∏à' } },
    'original veg': { flavors: { battered: '‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏à' } },
  };

  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    const lowerLine = line.toLowerCase();

    // Extract phone number (10 digits)
    const phoneMatch = line.match(/(?:‡πÇ‡∏ó‡∏£|tel|phone)?\s*:?\s*(\d{10})/i) || line.match(/(\d{10})/);
    if (phoneMatch && !data.phone) {
      data.phone = phoneMatch[1];
      continue;
    }

    // Extract amount (with B or ‡∏ö‡∏≤‡∏ó)
    const amountMatch = line.match(/(\d+(?:,\d{3})*(?:\.\d{2})?)\s*(?:B|‡∏ö‡∏≤‡∏ó|baht)/i);
    if (amountMatch && !data.amount) {
      data.amount = amountMatch[1].replace(/,/g, '');
      continue;
    }

    // Extract payment method
    if ((lowerLine.includes('‡πÇ‡∏≠‡∏ô') || lowerLine.includes('transfer')) && !data.payment_method) {
      data.payment_method = 'TRANSFER';
    } else if ((lowerLine.includes('cod') || lowerLine.includes('‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á')) && !data.payment_method) {
      data.payment_method = 'COD';
    }

    // Extract social media
    const socialMatch = line.match(/(?:fb|facebook)\s*:\s*(.+)/i) || line.match(/(?:line)\s*:\s*(.+)/i);
    if (socialMatch && !data.social_name) {
      const socialName = socialMatch[1].trim();
      data.social_name = socialName;
      if (lowerLine.match(/fb\s*:/) || lowerLine.match(/facebook\s*:/)) {
        data.social_type = 'FB';
      } else if (lowerLine.match(/line\s*:/)) {
        data.social_type = 'LINE';
      }
      continue;
    }

    // Extract shipping
    const shippingKeywords = ['‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå', 'kerry', 'flash', 'j&t', 'scg', 'best', 'dhl', 'ems'];
    for (const keyword of shippingKeywords) {
      if (lowerLine.includes(keyword)) {
        if (!data.shipping) {
          data.shipping = line.trim().replace(/^\d+\.\s*/, '');
          break;
        }
      }
    }

    // Product context
    let foundProduct = false;
    for (const [keyword, ptype] of Object.entries(productTypes)) {
      if (lowerLine.includes(keyword)) {
        foundProduct = true;
        data.currentProductType = ptype;

        // ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö ‚Äú‡∏Ñ‡∏•‡∏∞‡∏£‡∏™ 20‚Äù ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        // 2.1 same line
        const inlineMixed = /‡∏Ñ‡∏•‡∏∞‡∏£‡∏™\s*(\d+)\s*(?:‡∏´‡πà‡∏≠|pack|packs)?/i.exec(line);
        if (inlineMixed) {
          const qty = parseInt(inlineMixed[1], 10);
          if (qty > 0) {
            const key = `${ptype}-‡∏Ñ‡∏•‡∏∞‡∏£‡∏™`;
            data.flavors[key] = (data.flavors[key] || 0) + qty;
          }
        }
        // 2.2 next line is "‡∏Ñ‡∏•‡∏∞‡∏£‡∏™ 20"
        const nextLine = (lines[i + 1] || '').trim();
        const nextMixed = /^‡∏Ñ‡∏•‡∏∞‡∏£‡∏™\s*(\d+)\s*(?:‡∏´‡πà‡∏≠|pack|packs)?$/i.exec(nextLine);
        if (nextMixed) {
          const qty = parseInt(nextMixed[1], 10);
          if (qty > 0) {
            const key = `${ptype}-‡∏Ñ‡∏•‡∏∞‡∏£‡∏™`;
            data.flavors[key] = (data.flavors[key] || 0) + qty;
          }
          i += 1; // consume next line
        }

        // ‡πÄ‡∏î‡∏¥‡∏°: ‡∏°‡∏≠‡∏á‡∏´‡∏≤‡∏£‡∏™‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
        for (const [flavorKey, flavorData] of Object.entries(flavorKeywords)) {
          if (lowerLine.includes(flavorKey.toLowerCase())) {
            const flavor = flavorData.flavors[ptype];
            if (flavor) {
              const qtyMatch = line.match(/(\d+)\s*(?:‡∏´‡πà‡∏≠|pack|packs)?/);
              if (qtyMatch) {
                const qty = parseInt(qtyMatch[1]);
                const key = `${ptype}-${flavor}`;
                data.flavors[key] = (data.flavors[key] || 0) + qty;
              }
              break;
            }
          }
        }
        break;
      }
    }

    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ context ‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏ß‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏≠‡∏á‡∏´‡∏≤‡∏£‡∏™‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ñ‡∏±‡∏î ‡πÜ ‡πÑ‡∏õ (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô "‡∏Ñ‡∏•‡∏∞‡∏£‡∏™" ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÅ‡∏•‡πâ‡∏ß)
    if (!foundProduct && data.currentProductType) {
      const baseFlavors = ['‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°', '‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤', '‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥', '‡πÄ‡∏ú‡πá‡∏î', '‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', '‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å', '‡∏ï‡πâ‡∏°‡∏¢‡∏≥', '‡∏ä‡∏µ‡∏™', '‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ä‡∏µ‡∏™', '‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤', '‡∏Ñ‡∏•‡∏∞‡∏£‡∏™'];
      const ptype = data.currentProductType;
      const cleanLine = lowerLine.replace(/^‡∏£‡∏™/, '');

      for (const baseFlavor of baseFlavors) {
        if (cleanLine.includes(baseFlavor.toLowerCase())) {
          const flavorData = flavorKeywords[baseFlavor];
          if (flavorData) {
            const flavor = flavorData.flavors[ptype];
            if (flavor) {
              const qtyMatch = line.match(/(\d+)\s*(?:‡∏´‡πà‡∏≠|pack|packs)?/);
              if (qtyMatch) {
                const qty = parseInt(qtyMatch[1]);
                const key = `${ptype}-${flavor}`;
                data.flavors[key] = (data.flavors[key] || 0) + qty;
                foundProduct = true;
                break;
              }
            }
          }
        }
      }
    }

    // ‡∏ä‡∏∑‡πà‡∏≠ & ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (‡∏ï‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
    if (!nameFound && !foundProduct && !phoneMatch && !amountMatch && i < 3) {
      const shippingNames = ['‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå', 'kerry', 'flash', 'j&t', 'scg', 'best', 'dhl', 'ems', 'post'];
      const isShippingLine = shippingNames.some(keyword => lowerLine.includes(keyword));
      if (!isShippingLine) {
        const clean = line.replace(/^\d+\.\s*/, '').replace(/[~]/g, ' ').trim();
        const parts = clean.split(/\s+/).filter(p => p && !p.match(/^\d+$/));
        if (parts.length > 0) {
          data.first_name = parts[0];
          if (parts.length > 1) data.last_name = parts.slice(1).join(' ');
          nameFound = true;
          continue;
        }
      }
    }
    // ‡πÄ‡∏Å‡πá‡∏ö address ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏à‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå
    if (nameFound && !data.phone && !foundProduct) {
      if (!lowerLine.startsWith('fb:') && !lowerLine.startsWith('facebook')) {
        addressLines.push(line);
      }
    }
  }

  // ‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà
  if (addressLines.length > 0) {
    data.address = addressLines.join(' ');
  }

  return data;
}

/** Fill form with parsed data */
function fillFormWithData(data) {
  if (data.first_name) document.getElementById('first_name').value = data.first_name;
  if (data.last_name) document.getElementById('last_name').value = data.last_name;
  if (data.address) document.getElementById('address').value = data.address;
  if (data.phone) document.getElementById('phone').value = data.phone;
  if (data.amount) document.getElementById('amount').value = data.amount;
  if (data.note) document.getElementById('note').value = data.note;
  if (data.shipping) document.getElementById('shipping').value = data.shipping;

  if (data.payment_method) {
    const pm = data.payment_method.toUpperCase();
    if (pm.includes('COD') || pm.includes('‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á')) {
      document.getElementById('payment_method').value = 'COD';
    } else if (pm.includes('TRANSFER') || pm.includes('‡πÇ‡∏≠‡∏ô')) {
      document.getElementById('payment_method').value = 'TRANSFER';
    }
  }

  if (data.social_name) document.getElementById('social_name').value = data.social_name;
  if (data.social_type) {
    if (data.social_type === 'FB') document.getElementById('social_fb').checked = true;
    if (data.social_type === 'LINE') document.getElementById('social_line').checked = true;
  }

  if (data.flavors) {
    Object.keys(data.flavors).forEach(key => {
      const el = document.getElementById(key);
      if (el) el.value = data.flavors[key];
    });
  }
}

/** ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ n8n */
form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  msg.innerHTML = '';

  const fd = new FormData(form);
  const inputs = Array.from(document.querySelectorAll('input[data-ptype]'));
  const rawPhone = String(fd.get('phone')||'');
  const phoneDigits = rawPhone.replace(/\D/g,'');

  const items = inputs.map(el => ({
    product_type: el.dataset.ptype,
    flavor: el.dataset.flavor,
    packs: Number(el.value || 0)
  })).filter(x => x.packs > 0);

  if(items.length === 0){
    msg.innerHTML = '<div class="err">‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πà‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>';
    return;
  }

  const payload = {
    first_name: fd.get('first_name'),
    last_name: fd.get('last_name'),
    address: fd.get('address'),
    phone: phoneDigits,
    amount: Number(fd.get('amount')),
    payment_method: fd.get('payment_method'), // TRANSFER / COD
    shipping: fd.get('shipping') || '',
    social_type: fd.get('social_type') || 'LINE',
    social_name: fd.get('social_name') || '',
    note: fd.get('note') || '',
    items
  };

  btnSubmit.disabled = true; btnSubmit.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';

  try{
    const res = await fetch(WEBHOOK_URL, {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });

    const data = await res.json().catch(()=> ({}));

    if(res.ok && data && data.ok){
      msg.innerHTML = `<div class="ok">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå: <b>${data.orderId}</b></div>`;
      form.reset(); updateSummary();
    }else{
      msg.innerHTML = `<div class="err">‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${res.status} ${res.statusText} ${data?.message||''}</div>`;
    }
  }catch(err){
    msg.innerHTML = `<div class="err">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠: ${err}</div>`;
  }finally{
    btnSubmit.disabled = false; btnSubmit.textContent = '‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå';
  }
});
</script>
</body>
</html>
